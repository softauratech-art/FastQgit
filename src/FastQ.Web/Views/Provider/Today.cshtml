@{
    ViewBag.Title = "Provider Today";
}
@section Head {
    <style>
        .table-striped tbody tr:nth-child(even) {
            background: rgba(255, 255, 255, 0.5);
        }
        .accordion-toggle { cursor: pointer; }
        .row-actions { display: none; }
        .row-actions.is-open { display: table-row; }
        .row-actions td { padding: 0 8px 12px; }
        .action-bar { display: flex; gap: 8px; flex-wrap: wrap; }
        .table-card { overflow-x: auto; }
        .date-nav { display: flex; align-items: center; gap: 10px; font-family: var(--font-heading); }
        .date-nav a { color: var(--accent); font-weight: 700; }
        .text-center { text-align: center; }
        .modal-backdrop.show { display: flex; }
        .modal-header { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
        .modal-title { margin: 0; font-size: 18px; font-weight: 700; }
        .modal-footer { display: flex; justify-content: flex-end; gap: 10px; }
        .modal-body { display: grid; gap: 10px; }
        .field-row { display: grid; grid-template-columns: 120px 1fr; gap: 12px; align-items: center; }
    </style>
}

<div class="card">
    <div class="card-header">
        <div>
            <div class="eyebrow">Provider</div>
            <h2 class="page-title">Today's Schedule</h2>
        </div>
        <span class="badge accent">Live Queue</span>
    </div>

    <div class="table-card">
        <table class="table table-striped table-sm">
            <thead>
                <tr>
                    <th>Start</th>
                    <th>Queue</th>
                    <th>Type of Service</th>
                    <th>Name</th>
                    <th>Phone</th>
                    <th>Status</th>
                    <th>Contact</th>
                    <th class="text-center">Expand</th>
                </tr>
            </thead>
            <tbody>
                <tr class="accordion-toggle" data-target="row1">
                    <td>7:50 AM</td>
                    <td>Building - Residential Plans Review</td>
                    <td>Questions: General</td>
                    <td>Marie Calendar</td>
                    <td>x2690</td>
                    <td>QUEUED</td>
                    <td>In-Person</td>
                    <td class="text-center">&darr;</td>
                </tr>
                <tr class="row-actions" id="row1">
                    <td colspan="8">
                        <div class="action-bar">
                            <button class="btn small primary" type="button">Check-In</button>
                            <button class="btn small secondary" type="button">Start</button>
                            <button class="btn small ghost" type="button">Transfer</button>
                            <button class="btn small ghost" type="button">Info</button>
                            <button class="btn small ghost" type="button">Remove</button>
                        </div>
                    </td>
                </tr>

                <tr class="accordion-toggle" data-target="row2">
                    <td>7:52 AM</td>
                    <td>Building - Subpermits</td>
                    <td>Questions: General</td>
                    <td>Martha Stuart</td>
                    <td>x2020</td>
                    <td>QUEUED</td>
                    <td>In-Person</td>
                    <td class="text-center">&darr;</td>
                </tr>
                <tr class="row-actions" id="row2">
                    <td colspan="8">
                        <div class="action-bar">
                            <button class="btn small primary" type="button">Check-In</button>
                            <button class="btn small secondary" type="button">Start</button>
                            <button class="btn small ghost" type="button">Transfer</button>
                            <button class="btn small ghost" type="button">Info</button>
                            <button class="btn small ghost" type="button">Remove</button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <button class="btn primary" type="button">Add Customer to Queue</button>
</div>

<div class="card note">
    <div class="date-nav">
        <a href="#" aria-label="Previous day">&lt;&lt;</a>
        <div>xx, Xxx yyyy</div>
        <a href="#" aria-label="Next day">&gt;&gt;</a>
    </div>
</div>

<div class="card">
    <div class="table-card">
        <table class="table table-striped table-sm">
            <thead>
                <tr>
                    <th>Start</th>
                    <th>Queue</th>
                    <th>Type of Service</th>
                    <th>Name</th>
                    <th>Phone</th>
                    <th>Status</th>
                    <th>Contact</th>
                    <th class="text-center">Expand</th>
                </tr>
            </thead>
            <tbody>
                <tr class="accordion-toggle" data-target="row3">
                    <td>8:00 AM</td>
                    <td>Building - Residential Plans Review</td>
                    <td>Questions: General</td>
                    <td>Marie Calendar</td>
                    <td>x2690</td>
                    <td>SCHEDULED</td>
                    <td>In-Person</td>
                    <td class="text-center">&darr;</td>
                </tr>
                <tr class="row-actions" id="row3">
                    <td colspan="8">
                        <div class="action-bar">
                            <button class="btn small primary" type="button">Check-In</button>
                            <button class="btn small secondary" type="button">Start</button>
                            <button class="btn small ghost" type="button">Transfer</button>
                            <button class="btn small ghost" type="button">Info</button>
                            <button class="btn small ghost" type="button">Remove</button>
                        </div>
                    </td>
                </tr>

                <tr class="accordion-toggle" data-target="row4">
                    <td>8:45 AM</td>
                    <td>Building - Subpermits</td>
                    <td>Questions: General</td>
                    <td>Martha Stuart</td>
                    <td>x2020</td>
                    <td>SCHEDULED</td>
                    <td>In-Person</td>
                    <td class="text-center">&darr;</td>
                </tr>
                <tr class="row-actions" id="row4">
                    <td colspan="8">
                        <div class="action-bar">
                            <button class="btn small primary" type="button">Check-In</button>
                            <button class="btn small secondary" type="button">Start</button>
                            <button class="btn small ghost" type="button">Transfer</button>
                            <button class="btn small ghost" type="button">Info</button>
                            <button class="btn small ghost" type="button">Remove</button>
                        </div>
                    </td>
                </tr>

                <tr class="accordion-toggle" data-target="row6">
                    <td>10:30 AM</td>
                    <td>Building - Subpermits</td>
                    <td>Questions: General</td>
                    <td>David Cheng</td>
                    <td>x6723</td>
                    <td>SCHEDULED</td>
                    <td>Phone</td>
                    <td class="text-center">&darr;</td>
                </tr>
                <tr class="row-actions" id="row6">
                    <td colspan="8">
                        <div class="action-bar">
                            <button class="btn small primary" type="button">Check-In</button>
                            <button class="btn small secondary" type="button">Start</button>
                            <button class="btn small ghost" type="button">Transfer</button>
                            <button class="btn small ghost" type="button">Info</button>
                            <button class="btn small ghost" type="button">Remove</button>
                        </div>
                    </td>
                </tr>

                <tr class="accordion-toggle" data-target="row61">
                    <td>11:00 AM</td>
                    <td>Building - Residential Plans Review</td>
                    <td>Questions: General</td>
                    <td>Arlene Martinez</td>
                    <td>x0221</td>
                    <td>SCHEDULED</td>
                    <td>Online</td>
                    <td class="text-center">&darr;</td>
                </tr>
                <tr class="row-actions" id="row61">
                    <td colspan="8">
                        <div class="action-bar">
                            <button class="btn small primary" type="button">Check-In</button>
                            <button class="btn small secondary" type="button">Start</button>
                            <button class="btn small ghost" type="button">Transfer</button>
                            <button class="btn small ghost" type="button">Info</button>
                            <button class="btn small ghost" type="button">Remove</button>
                        </div>
                    </td>
                </tr>

                <tr class="accordion-toggle" data-target="row7">
                    <td>02:00 PM</td>
                    <td>Building - Residential Plans Review</td>
                    <td>Questions: Fasttrack application</td>
                    <td>Carter Harper</td>
                    <td>x7812</td>
                    <td>SCHEDULED</td>
                    <td>Online</td>
                    <td class="text-center">&darr;</td>
                </tr>
                <tr class="row-actions" id="row7">
                    <td colspan="8">
                        <div class="action-bar">
                            <button class="btn small primary" type="button">Check-In</button>
                            <button class="btn small secondary" type="button">Start</button>
                            <button class="btn small ghost" type="button">Transfer</button>
                            <button class="btn small ghost" type="button">Info</button>
                            <button class="btn small ghost" type="button">Remove</button>
                        </div>
                    </td>
                </tr>

                <tr class="accordion-toggle" data-target="row8">
                    <td><a href="#" class="meeting-link" data-id="new">03:00 PM</a></td>
                    <td>Building - Licensing and NOC</td>
                    <td>Questions: Notice of Commencement (NOC)</td>
                    <td>Pamella ONeil</td>
                    <td>x2659</td>
                    <td class="error">PENDING</td>
                    <td>Online</td>
                    <td class="text-center">&darr;</td>
                </tr>
                <tr class="row-actions" id="row8">
                    <td colspan="8">
                        <div class="action-bar">
                            <button class="btn small primary" type="button">Check-In</button>
                            <button class="btn small secondary" type="button">Start</button>
                            <button class="btn small ghost" type="button">Transfer</button>
                            <button class="btn small ghost" type="button">Info</button>
                            <button class="btn small ghost" type="button">Remove</button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <button class="btn primary" type="button">Add New Appointment</button>
</div>

<div id="meetingModal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="meetingModalTitle">
    <div class="modal">
        <div class="modal-header">
            <h5 class="modal-title" id="meetingModalTitle">Meeting Details</h5>
            <button class="btn small ghost" type="button" data-modal-close="meetingModal">Close</button>
        </div>
        <div class="modal-body">
            <p>Meeting Id: <span id="mid"></span></p>
            <p>
                Meeting Date: Oct 13, 2025<br />
                Meeting Time: 10:00 AM<br />
                Title: Building - Commercial Plans Review (Pamela ONeil)<br />
            </p>
            <p>Customer Info:<br />Pamela ONeil | pamela@example.com | 407-123-2659</p>
            <div class="field-row">
                <div>Join URL:</div>
                <input id="mURL" type="text" value="" />
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn ghost" type="button" data-modal-close="meetingModal">Close</button>
            <button class="btn primary" type="button" id="saveMeeting">Save Changes</button>
        </div>
    </div>
</div>

<div id="webexModal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="webexModalTitle">
    <div class="modal">
        <div class="modal-header">
            <h5 class="modal-title" id="webexModalTitle">WebEx</h5>
            <button class="btn small ghost" type="button" data-modal-close="webexModal">Close</button>
        </div>
        <div class="modal-body">This will launch WebEx meeting link.</div>
    </div>
</div>

@section Scripts {
<script>
  (function () {
    function closeModal(id) {
      var modal = document.getElementById(id);
      if (modal) {
        modal.classList.remove("show");
      }
    }

    function openModal(id) {
      var modal = document.getElementById(id);
      if (modal) {
        modal.classList.add("show");
      }
    }

    document.querySelectorAll(".accordion-toggle").forEach(function (row) {
      row.addEventListener("click", function () {
        var targetId = row.getAttribute("data-target");
        if (!targetId) {
          return;
        }
        document.querySelectorAll(".row-actions").forEach(function (detail) {
          if (detail.id !== targetId) {
            detail.classList.remove("is-open");
          }
        });
        var target = document.getElementById(targetId);
        if (target) {
          target.classList.toggle("is-open");
        }
      });
    });

    document.querySelectorAll("[data-modal-close]").forEach(function (btn) {
      btn.addEventListener("click", function () {
        closeModal(btn.getAttribute("data-modal-close"));
      });
    });

    var meetingLink = document.querySelector(".meeting-link");
    if (meetingLink) {
      meetingLink.addEventListener("click", function (event) {
        event.preventDefault();
        var mid = document.getElementById("mid");
        if (mid) {
          mid.textContent = meetingLink.getAttribute("data-id") || "";
        }
        openModal("meetingModal");
      });
    }

    var saveMeeting = document.getElementById("saveMeeting");
    if (saveMeeting) {
      saveMeeting.addEventListener("click", function () {
        closeModal("meetingModal");
      });
    }
  })();
</script>
}
